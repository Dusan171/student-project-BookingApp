<Window x:Class="BookingApp.Presentation.View.Guest.AccommodationReviewView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:loc="clr-namespace:BookingApp.Utilities"
        Title="Leave a Review" Height="750" Width="550"
        WindowStartupLocation="CenterScreen" 
        Background="{DynamicResource PrimaryBackgroundColor}">

    <Grid Margin="25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" FontSize="28" FontWeight="Bold" Margin="0,0,0,20" TextWrapping="Wrap"
                   Foreground="{DynamicResource PrimaryTextColor}">
            <Run Text="{loc:Translate AccomReview_Header}"/>
            <Run Text=" "/>
            <Run Text="{Binding _reservationDetails.AccommodationName}" Foreground="{DynamicResource AccentPrimaryColor}"/>
        </TextBlock>

        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <TextBlock Text="{loc:Translate AccomReview_Cleanliness}" Foreground="{DynamicResource PrimaryTextColor}" FontSize="18" FontWeight="SemiBold" Margin="0,10,0,5"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Slider Grid.Column="0" Value="{Binding CleanlinessRating}" Style="{StaticResource GuestSliderStyle}"/>
                    <TextBlock Grid.Column="1" Text="{Binding CleanlinessRating}" FontSize="22" FontWeight="Bold" Margin="15,0,0,0" VerticalAlignment="Center"
                               Foreground="{DynamicResource AccentPrimaryColor}"/>
                </Grid>

                <TextBlock Text="{loc:Translate AccomReview_OwnerCorrectness}" Foreground="{DynamicResource PrimaryTextColor}" FontSize="18" FontWeight="SemiBold" Margin="0,20,0,5"/>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Slider Grid.Column="0" Value="{Binding OwnerRating}" Style="{StaticResource GuestSliderStyle}"/>
                    <TextBlock Grid.Column="1" Text="{Binding OwnerRating}" FontSize="22" FontWeight="Bold" Margin="15,0,0,0" VerticalAlignment="Center"
                               Foreground="{DynamicResource AccentPrimaryColor}"/>
                </Grid>

                <TextBlock Text="{loc:Translate AccomReview_Comment}" Foreground="{DynamicResource PrimaryTextColor}" FontSize="18" FontWeight="SemiBold" Margin="0,20,0,5"/>
                <TextBox Text="{Binding Comment, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource GuestTextBoxStyle}" 
                         AcceptsReturn="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto" MinHeight="120"/>

                <TextBlock Text="{loc:Translate AccomReview_Images}" Foreground="{DynamicResource PrimaryTextColor}" FontSize="18" FontWeight="SemiBold" Margin="0,20,0,10"/>
                <Button Content="{loc:Translate AccomReview_UploadImages}" Command="{Binding UploadImageCommand}" Style="{StaticResource SecondaryButton}" HorizontalAlignment="Left" Margin="0,0,0,10"/>
                <ItemsControl ItemsSource="{Binding ImagePaths}">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="{DynamicResource BorderColor}" BorderThickness="1" Margin="5" CornerRadius="5" Height="100" Width="100">
                                <Grid>
                                    <Image Source="{Binding}" Stretch="UniformToFill"/>
                                    <Button Command="{Binding DataContext.RemoveImageCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                            CommandParameter="{Binding}"
                                            Style="{StaticResource DangerButton}"
                                            Content="X" FontWeight="Bold" 
                                            Width="25" Height="25" Padding="0" HorizontalAlignment="Right" VerticalAlignment="Top"
                                            Margin="0,-12,-12,0"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="{loc:Translate AccomReview_Submit}" Style="{StaticResource PrimaryButton}" IsDefault="True" Command="{Binding SubmitCommand}"/>
            <Button Content="{loc:Translate Common_Cancel}" Style="{StaticResource SecondaryButton}" Margin="10,0,0,0" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>