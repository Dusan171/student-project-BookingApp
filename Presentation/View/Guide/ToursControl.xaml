<Page x:Class="BookingApp.Presentation.View.Guide.ToursControl"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:util="clr-namespace:BookingApp.Utilities"
      xmlns:controls="clr-namespace:BookingApp.Presentation.View.Guide.Controls"
      Background="White">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/ToursControlStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <util:BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
            <util:InverseBooleanConverter x:Key="InverseBoolToVisibilityConverter"/>
        </ResourceDictionary>
    </Page.Resources>

    <Grid>
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Main Tours Section -->
            <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- Header -->
                    <DockPanel Margin="0,0,0,10">
                        <TextBlock Text="Tours" FontSize="20" FontWeight="Bold" DockPanel.Dock="Left" VerticalAlignment="Center"/>
                        <Button Content="New Tour" Command="{Binding NewTourCommand}" Background="#007ACC" Foreground="White" HorizontalAlignment="Right" DockPanel.Dock="Right" Padding="10,2" Style="{StaticResource AnimatedButtonStyle}" ToolTip="Create a new tour"/>
                    </DockPanel>

                    <!-- Filter Section -->
                    <StackPanel Margin="0,0,0,12">
                        <Label Content="Filter Tours:" HorizontalAlignment="Left"/>
                        <ComboBox ItemsSource="{Binding FilterOptions}" SelectedItem="{Binding SelectedFilter}" Width="100" HorizontalAlignment="Left" ToolTip="Select a filter for tours"/>
                    </StackPanel>

                    <!-- Tours List -->
                    <ItemsControl ItemsSource="{Binding Tours}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <controls:TourCardControl DataContext="{Binding}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>

            <!-- Report Generator Section -->
            <controls:ReportGeneratorControl x:Name="ReportGenerator" Grid.Row="1" GenerateReportClick="GenerateReport_Click"/>
        </Grid>

        <!-- PDF Modal -->
        <controls:PdfModalControl x:Name="PdfModal" 
                                  ClosePDFOverlayClick="ClosePDFOverlay_Click" 
                                  OpenPDFExternalClick="OpenPDFExternal_Click"/>
    </Grid>
</Page>
